# 电子邮件使用指南

EspoCRM能从IMAP服务器接收电子邮件。这样，与它特定的CRM功能相结合，EspoCRM就可以用作电子邮件客户端。

## IMAP账户

*注意：你需要正确配置好你系统里的[cron](https://github.com/espocrm/documentation/blob/master/administration/server-configuration.md#setup-a-crontab)，才可以正常收取电子邮件。*

用户可以在“个人邮件账户”页面（“邮件”选项卡>右上角的菜单>“个人邮件账户”）对IMAP账户进行设置。

在“监视文件夹”字段中指定你要监视的文件夹。默认的设置是“收件箱”。如果你是使用一些外部电邮客户端来发送邮件，你可以添加一个名为“已发送”的文件夹来对这些邮件进行归档。

*收取自*字段表明邮件归档的开始日期。如果你需要对旧邮件进行归档，这个归档开始日期必须早于今天。

你可以在“个人邮件账户”中指定一个*文件夹*。这样，收到的电子邮件就会放到这个文件夹中。

## SMTP账户

用户可以在“首选项”对SMTP进行设置，也可以在“个人邮件账户”中设置。管理员也可以允许用户使用系统SMTP（设为“已共享”）。

（从4.2.0版开始）用户可以使用多个SMTP账户。但是，用户发送邮件能用的邮箱地址是在*用户*记录中设定的邮箱地址。

## 使用电子邮件

电子邮件是（在后台）通过cron来收取的，每隔几分钟接收一次（这个间隔时间可由管理员设定）。
在“邮件”选项卡你可以看到全部的邮件。在页面左侧有多个标准的文件夹：收件箱、发件箱、草稿箱。

*状态*字段。`已发送`表示邮件是从CRM发出的，`已归档`表示邮件收取自IMAP账户或邮件已经过手动归档，`草稿`表示邮件在创建后处在草稿状态。

当有新邮件进来时，系统会尝试识别邮件所属的记录。系统可以将邮件与“账户”、“潜在客户”、“机会”、“案例”（和B2C模式下的“联系人”）等相联系。如果系统不能识别，那么用户可以手动将这封邮件与特定的记录进行关联，在*父级*字段中填写这个记录即可。

如果邮件来自是一位有望成交的客户发过来的，你可以将它**转换为“潜在客户”**。打开“邮件”条目，在右上角的菜单中点击“创建潜在客户”。

你也可以在一条邮件记录中**创建“任务”或“案例”**。

如果在一个邮件记录的邮箱地址（发自、发往、转发）是系统已知的，那么，相关的人（“联系人”、“潜在客户”、“用户”等）就会显示出来。如果邮箱地址是新的，你可以直接在那里**新建联系人**。

与特定记录相关的全部邮件都会在这个记录的“历史”面板中显示出来。例如，一些邮件与“机会”相关联，而“机会”与“账户”相关联，那么，这些邮件就会同时出现在“机会”和“账户”中。

## 发送电子邮件

写新邮件有几种方法：
* 点击“邮件列表”视图中的*写邮件*按钮；
* 对一封邮件进行回复；
* 点击邮件记录中的某个邮箱地址；
* “活动”面板中点击*写邮件*这项操作

你可以为你的邮件**选择模板**。

你可以在“首选项”中设置**邮件签名**。

## 邮件文件夹

用户可以创建自己的邮件文件夹，有时候把一些邮件放进特定的文件夹是很方便的做法。你可以在“电子邮件”页面的左侧看到可用文件夹的列表。要创建或编辑文件夹，选择“邮件”>右上角的下拉菜单>“文件夹”。`跳过通知`表示，属于某个文件夹的邮件进来时，你不会收到通知。设置“邮件过滤器”后，邮件可自动地按特定的标准放入文件夹。

## 邮件过滤器

管理员可以创建全局的邮件过滤器，过滤掉不需要的邮件。这可以在“管理”>“邮件过滤器”中找到。

普通用户可以为他们的“个人邮件账户”或整个收件箱创建邮件过滤器。可以在“邮件”>右上角的下拉菜单>过滤器中设置。

过滤器有两种类型：
* “跳过”：如果过滤器与“个人邮件账户”关联，邮件就会放入*垃圾箱*，或者不会导入。
* “放入文件夹”：导入的邮件会自动放入用户的特定的文件夹。

## 邮件模板

你可以在“邮件”>右上角的下拉菜单>“邮件模板”中找到邮件模板。邮件模板可以用于群发和定期发送。`一次性`复选框选中则表示邮件模板只使用一次，这通常用于邮件营销。

在邮件模板的正文和主题处可以使用占位符，例如{Account.name}、{Person.emailAddress}。邮件发出时，占位符会被相应记录的值所取代。

在模板的正文，你可以用其它保留占位符，例如：{optOutUrl}和{optOutLink}。
```
<a href="{optOutUrl}">不再订阅</a>
```
这个链接表示不再订阅群发邮件。

